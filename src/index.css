@import "tailwindcss";

@source "../src";

@layer base {
  :root {
    --radius: 0.5rem;
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%
  }
  .dark {
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%
  }
  
  /* 强制设置基础样式，防止被 Telegram 主题覆盖 */
  html {
    background-color: #f9fafb !important;
    min-height: 100vh;
  }
  
  body {
    background-color: #f9fafb !important;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    font-family: "Noto Sans SC", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  #root {
    background-color: #f9fafb !important;
    min-height: 100vh;
  }

  /* 确保 Telegram WebApp 容器也有正确的背景 */
  .tg-viewport {
    background-color: #f9fafb !important;
  }
}

/*
 * ⚠️ 关键修复：覆盖 Tailwind v4 preflight 的 img { height: auto; max-width: 100% }
 *
 * Tailwind v4 preflight 设置了 img { max-width: 100%; height: auto }
 * 这会导致在固定尺寸容器中使用 object-fit: cover 的图片无法正确填充。
 *
 * 以下规则放在 @layer 外部，优先级高于 @layer base 中的 preflight。
 * 使用 !important 确保在 Telegram WebView（旧版 Chromium）中也能生效。
 */

/* 当 img 有内联 style 设置了 position:absolute 时，覆盖 preflight */
img[style*="absolute"] {
  max-width: none !important;
  height: auto !important;
  height: unset !important;
}

/* 兜底：当 img 使用 Tailwind class 时确保正确显示 */
img.object-cover,
img.object-contain,
img.h-full,
img.w-full {
  max-width: none !important;
}

img.object-cover {
  object-fit: cover !important;
  object-position: center !important;
}

img.object-contain {
  object-fit: contain !important;
  object-position: center !important;
}

img.h-full {
  height: 100% !important;
}

img.w-full {
  width: 100% !important;
}

/* Loading spinner animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Pulse animation for loading placeholders */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
