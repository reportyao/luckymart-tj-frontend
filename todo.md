# LuckyMart TJ 项目 TODO

## 新增功能需求

### 中奖码系统
- [x] 购买彩票时生成唯一中奖码
- [ ] 用户可查询自己某个商品的所有中奖码
- [ ] 开奖后显示中奖码和中奖人
- [x] 创建"我的中奖码"页面

### 自动开奖机制
- [ ] 移除夺宝到期时间设置
- [ ] 实现售罄后自动触发开奖
- [ ] 调用VRF开奖算法
- [ ] 公布中奖码和中奖人信息

### 中奖管理功能
- [x] 创建"我的中奖"页面
- [ ] 显示所有中奖商品列表
- [ ] 添加"申请发货"功能
- [ ] 添加"转售"功能
- [ ] 发货地址填写表单

### 数据库优化
- [ ] Ticket表添加winning_code字段(中奖码)
- [ ] Lottery表移除draw_time字段
- [ ] 添加Prize表存储中奖记录
- [ ] 添加Shipping表存储发货信息

### 前端页面
- [x] 创建MyTicketsPage(我的中奖码)
- [x] 创建MyPrizesPage(我的中奖)
- [ ] 更新LotteryPage显示中奖码
- [x] 更新PurchaseModal生成中奖码
- [ ] 创建ShippingModal(发货地址)

### 后端API
- [ ] 实现自动开奖触发逻辑
- [ ] 实现中奖码生成算法
- [ ] 实现发货申请API
- [ ] 实现中奖查询API

## 测试任务
- [ ] 测试完整夺宝流程(购买→售罄→自动开奖→查询中奖)
- [ ] 测试转售流程(中奖→转售→购买)
- [ ] 测试管理后台创建夺宝商品
- [ ] 测试发货申请流程

## 已完成功能
- [x] 用户认证(多语言支持)
- [x] 钱包系统(充值提现)
- [x] 夺宝系统(VRF验证)
- [x] 订单管理(完整页面)
- [x] 通知系统(站内信)
- [x] 邀请系统(三级佣金)
- [x] 晒单分享(审核机制)
- [x] 转售市场(交易处理)
- [x] Bug修复(5个bug全部修复)

## 充值提现兑换功能完善

### 充值功能
- [ ] 创建充值页面,显示转账信息
- [ ] 管理后台可配置转账信息(银行账号/Alif Mobi/DC Bank)
- [ ] 用户完成转账后提交充值申请
- [ ] 管理后台审核充值申请
- [ ] 审核通过后自动增加用户余额
- [ ] 支持三语言(中文/俄语/塔吉克语)

### 提现功能
- [ ] 创建提现申请页面
- [ ] 用户填写银行卡信息(卡号/户名/银行名称)
- [ ] 用户填写身份信息(姓名/身份证号/手机号)
- [ ] 提交提现申请到管理后台
- [ ] 管理后台审核提现申请
- [ ] 审核通过后扣除用户余额
- [ ] 记录提现状态变化(待审核/已通过/已拒绝)
- [ ] 支持三语言(中文/俄语/塔吉克语)

### 兑换功能
- [ ] 创建兑换页面
- [ ] 余额兑换为夺宝币(1:1比例)
- [ ] 夺宝币兑换为余额(1:1比例)
- [ ] 实时更新余额和夺宝币显示
- [ ] 添加兑换记录查询
- [ ] 支持三语言(中文/俄语/塔吉克语)

### 数据库表设计
- [ ] 创建deposit_requests表(充值申请)
- [ ] 创建withdrawal_requests表(提现申请)
- [ ] 创建exchange_records表(兑换记录)
- [ ] 创建payment_config表(支付配置信息)

### 后端API
- [ ] deposit-request: 提交充值申请
- [ ] withdraw-request: 提交提现申请
- [ ] exchange-currency: 余额与夺宝币兑换
- [ ] get-deposit-requests: 获取充值申请列表(管理后台)
- [ ] get-withdrawal-requests: 获取提现申请列表(管理后台)
- [ ] approve-deposit: 审核充值申请(管理后台)
- [ ] approve-withdrawal: 审核提现申请(管理后台)
- [ ] get-payment-config: 获取支付配置信息
- [ ] update-payment-config: 更新支付配置(管理后台)

### 管理后台功能
- [ ] 充值申请管理页面
- [ ] 提现申请管理页面
- [ ] 支付配置管理页面
- [ ] 审核操作(通过/拒绝)
- [ ] 查看用户银行卡和身份信息

### 三语言翻译
- [ ] 添加充值相关翻译(中文/俄语/塔吉克语)
- [ ] 添加提现相关翻译(中文/俄语/塔吉克语)
- [ ] 添加兑换相关翻译(中文/俄语/塔吉克语)
- [ ] 添加审核状态翻译(中文/俄语/塔吉克语)
